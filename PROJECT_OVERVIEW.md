# Project Purpose

The project is an AngularJS WYSIWYG (What You See Is What You Get) editor.

It utilizes an iframe to render the editor. This approach offers several advantages:

*   **Isolation:** The iframe isolates the editor's content from the rest of the page.
*   **Conflict Prevention:** This isolation helps prevent CSS and JavaScript conflicts between the editor and the main application.
*   **Enhanced Security:** By sandboxing potentially malicious code within the content, the iframe enhances security.

# Key Features

*   **Toolbar Customization:** Users can configure the visible buttons on the editor's toolbar.
*   **Input Sanitization:** The editor utilizes Angular's `$sanitize` service to prevent Cross-Site Scripting (XSS) attacks by sanitizing user input.
*   **Custom Content Styling:** Users can specify a custom CSS file to control the appearance of the content within the editor area.
*   **API for Image Insertion:** Developers can leverage an API to implement custom dialogs for image uploads or selections, providing a more tailored user experience.

# Installation

## Requirements

*   `AngularJS` ≥ `1.2.x`
*   `Angular Sanitize` ≥ `1.2.x`

## Bower Installation

1.  Run the following command to install ngWYSIWYG:
    ```Shell
    $ bower install ngWYSIWYG --save
    ```

2.  Include the CSS and JavaScript files in your `index.html`:
    ```html
    <link rel="stylesheet" href="bower_components/ngWYSIWYG/dist/editor.min.css" />
    <script src="bower_components/ngWYSIWYG/dist/wysiwyg.min.js"></script>
    ```

3.  Add `ngWYSIWYG` as a module in your application's JavaScript file (e.g., `app.js`):
    ```javascript
    ['ngWYSIWYG']
    ```

# Basic Usage

To use the editor, add the following HTML snippet to your template:

```html
<wysiwyg-edit content="your_variable"></wysiwyg-edit>
```

In this snippet:

*   `content="your_variable"`: `your_variable` refers to a scope variable within your AngularJS controller. This variable will hold the HTML content generated by the editor. Any changes made in the editor will be reflected in this variable, and conversely, any changes to this variable will update the editor's content.

# Configuration

The editor can be configured by passing an object to the `config` attribute of the `<wysiwyg-edit>` directive.

```html
<wysiwyg-edit content="your_variable" config="editorConfig"></wysiwyg-edit>
```

Here are the available configuration options:

## `sanitize`

This option takes a boolean value. When set to `true`, the editor uses Angular's `$sanitize` service to sanitize user input, which helps prevent Cross-Site Scripting (XSS) attacks.

**Example:**

```javascript
$scope.editorConfig = {
    sanitize: true, // or false to disable
    // ... other options
};
```

## `toolbar`

This option takes an array of objects that define the groups and buttons displayed in the editor's toolbar. Each object represents a group and contains a `name` and an `items` array specifying the buttons in that group.

**Example:**

```javascript
$scope.editorConfig = {
    toolbar: [
        { name: 'basicStyling', items: ['bold', 'italic', 'underline', 'strikethrough', 'subscript', 'superscript', '-', 'leftAlign', 'centerAlign', 'rightAlign', 'blockJustify', '-'] },
        { name: 'paragraph', items: ['orderedList', 'unorderedList', 'outdent', 'indent', '-'] },
        { name: 'doers', items: ['removeFormatting', 'undo', 'redo', '-'] },
        { name: 'colors', items: ['fontColor', 'backgroundColor', '-'] },
        { name: 'links', items: ['image', 'hr', 'symbols', 'link', 'unlink', '-'] },
        { name: 'tools', items: ['print', '-'] },
        { name: 'styling', items: ['font', 'size', 'format'] },
    ]
    // ... other options
};
```

## `content-style` Attribute

In addition to the `config` object, you can use the `content-style` attribute directly on the `<wysiwyg-edit>` directive to specify a custom CSS file for styling the content within the editor's iframe.

If a relative path is provided, it's resolved relative to the URL of the HTML file that includes ngWYSIWYG, not relative to ngWYSIWYG itself.

**Example:**

```html
<wysiwyg-edit content="your_variable" config="editorConfig" content-style="custom_editor_styles.css"></wysiwyg-edit>
```

This is useful for making the editor's content area mirror the styling of the destination page. For example, if your site has a black background and white text, your `custom_editor_styles.css` might contain:

```css
html, body {
    background-color: black;
    color: #ffffff;
}
```

## `api` Object

An `api` object can be passed to the `api` attribute of the `<wysiwyg-edit>` directive to enable custom functionality.

### `insertImage`

One such function is `insertImage`. By providing your own `insertImage` function within the `api` object, you can implement a custom workflow for inserting images, such as displaying a custom dialog for image uploads or selection. This function should return a promise that resolves with the HTML for the image or rejects if the insertion is canceled.

**Example:**

```javascript
// In your controller
$scope.api = {
    scope: $scope, // Pass the current scope
    insertImage: function() {
        var deferred = $q.defer(); // Assuming $q is injected
        // Example: Use a prompt (replace with your custom dialog)
        var imageUrl = prompt('Enter image URL', 'http://');
        if (imageUrl) {
            deferred.resolve('<img src="' + imageUrl + '" style="width: 30%;">');
        } else {
            deferred.reject(null);
        }
        return deferred.promise;
    }
    // ... other api functions
};
```

Then, in your HTML:

```html
<wysiwyg-edit content="your_variable" config="editorConfig" api="api"></wysiwyg-edit>
```

# Maintenance and Roadmap

## Roadmap

The following items are planned for future development:

*   Current cursor/caret position style reflection on the toolbar
*   Material Design integration
*   Implementation of comprehensive tests
*   Exploration and adaptation for Angular 2.0

## Issues

If you encounter any problems or have suggestions, please submit an issue request on the project's issue tracker.
